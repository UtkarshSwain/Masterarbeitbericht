\chapter{Anforderungsanalyse}
\label{chap:anforderungen}
Die in Kapitel 3 dargelegten theoretischen und technischen Grundlagen bilden das Fundament für die praktische Umsetzung des Systems. In den nachfolgenden Schritten erfolgt die Konkretisierung der Anforderungen an den zu entwickelnden Prototyp. Die vorliegende Analyse leitet sich aus den funktionalen Zielen des Projektes sowie den nicht-funktionalen Rahmenbedingungen im industriellen Umfeld der Siemens Mobility GmbH ab. Zu diesem Zweck werden die Systemgrenzen, Datenformate sowie potenzielle technische Herausforderungen strukturiert analysiert.

\section{Funktionale Anforderungen}
\label{sec:funktionaleanforderungen}
Im Rahmen dieser Arbeit wird ein Prototyp entwickelt, der die automatisierte Extraktion und Interpretation von Informationen aus technischen Gleisplänen ermöglicht. Die funktionalen Anforderungen (FA-001 bis FA-014 ) ergeben sich aus den spezifischen Aufgabenstellungen der Signaltechnik-Planung. Das System soll folgende Kernfunktionen erfüllen:

\subsection{Symbolerkennung und Objektklassifizierung}
\label{subsec:req_symbol}
Eine zentrale Anforderung ist die zuverlässige Detektion bahntechnischer Symbole in Vektor- oder Rastergrafiken.

\begin{itemize}
    \item \textbf{FA-001}\label{req:FA-001} \textbf{Erkennungsrate:} Das System muss mindestens 90\,\% der definierten Symbolklassen automatisiert erkennen (gemessen als Recall des YOLO-Modells).

    \item \textbf{FA-002}\label{req:FA-002} \textbf{Rotationsinvarianz:} Da Symbole in Gleisplänen der Topologie folgend in beliebigen Winkeln angeordnet sein können, muss die Erkennung rotationsinvariant erfolgen. Das System muss in der Lage sein, Objekte unabhängig von ihrer Orientierung ($0^\circ$ bis $360^\circ$) korrekt zu klassifizieren und deren Winkel (Rotation) präzise zu bestimmen.
    \item \textbf{FA-003}\label{req:FA-003} \textbf{Zielobjekte:} Basierend auf der Domänenanalyse wurden die in den Tabellen \ref{tab:kernklassen} und \ref{tab:auxiliarklassen} dargestellten Objekte als Detektionsziele definiert. Diese gliedern sich in \textbf{Kernklassen}, die für die Planungsaufgaben bei Siemens Mobility essentiell sind und vollständig evaluiert werden, sowie \textbf{Auxiliarklassen}, die zur Demonstration der Systemerweiterbarkeit implementiert werden.
\end{itemize} 
\subsubsection{Kernklassen (produktionsrelevant)}

Die folgenden fünf Objektklassen bilden den Kern der Extraktionsaufgabe und werden 
in Kapitel~\ref{chap:evaluation} quantitativ evaluiert:

\begin{longtable}{|p{5cm}|p{7cm}|}
    \hline
    \textbf{Objektklasse} & \textbf{Symbol} \\
    \hline
    \endhead

    Signal & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/Signal2.png}
        \vspace{0.2cm}
    } \\
    \hline 

    Koordinate (Positionsangabe) & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/Position.png}
        \vspace{0.2cm}
    } \\
    \hline

    GKS (festkodiert) & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/GKS1.png}
        \vspace{0.2cm}
    } \\
    \hline

    GKS (gesteuert) & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/GKS2.png}
        \vspace{0.2cm}
    } \\
    \hline

    Gleismagnet & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/gleismagnet.png}
        \vspace{0.2cm}
    } \\
    \hline

    \caption{Kernklassen für die Datenextraktion (vollständig evaluiert)}
    \label{tab:kernklassen}
\end{longtable}

\subsubsection{Auxiliarklassen (Erweiterbarkeit)}

Zur Demonstration der Modularität und Erweiterbarkeit des Systems (vgl. Anforderung FA-013) werden zusätzlich acht weitere Objektklassen implementiert. Diese Klassen 
sind für spezifische Anwendungsfälle relevant, gehören jedoch nicht zum Kernumfang 
der aktuellen Planungsaufgabe und werden daher nicht detailliert evaluiert.

\begin{longtable}{|p{5cm}|p{7.5cm}|}
    \hline
    \textbf{Objektklasse} & \textbf{Symbol} \\
    \hline
    \endhead

    Weichenblock & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=3cm]{images/symbols/Weiche2.png}
        \vspace{0.2cm}
    } \\
    \hline 

    Haltepunkt & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/haltepunkt3.png}
        \vspace{0.2cm}
    } \\
    \hline

    Isolierstoß & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=1cm]{images/symbols/Isolierstoß§.png}
        \vspace{0.2cm}
    } \\
    \hline

    S-Verbinder & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=3cm]{images/symbols/SVERBINDER.png}
        \vspace{0.2cm}
    } \\
    \hline

    Prellbock & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=2cm]{images/symbols/prellblock.png}
        \vspace{0.2cm}
    } \\
    \hline

    Haltetafel & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=3cm]{images/symbols/Haltetafel.png}
        \vspace{0.2cm}
    } \\
    \hline

    Ende Weichen & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=3cm]{images/symbols/weichenende.png}
        \vspace{0.2cm}
    } \\
    \hline

    Weichengruppenende & 
    \parbox[c]{7cm}{\centering
        \vspace{0.2cm}
        \includegraphics[width=3cm]{images/symbols/weichengruppeende.png}
        \vspace{0.2cm}
    } \\
    \hline

    \caption{Auxiliarklassen zur Demonstration der Erweiterbarkeit (nicht evaluiert)}
    \label{tab:auxiliarklassen}
\end{longtable}

\textbf{Hinweis:} Die Auxiliarklassen werden im Rahmen des YOLOv8-Trainings (Kapitel~\ref{sec:objekterkennungmityolov8obb}) mit annotiert und erreichen vergleichbare Detektionsleistungen wie die Kernklassen. Die Fokussierung der End-to-End-Evaluation auf die Kernklassen erfolgte aufgrund der notwendigen Eingrenzung des Evaluationsumfangs. Bemerkenswert ist, dass das Modell auch visuell sehr ähnliche Symbole (z.\,B. Haltepunkt-Varianten H, Weichen W, Weichengruppen WG) zuverlässig unterscheiden kann. Eine detaillierte Analyse 
dieser Feinunterscheidungen war jedoch nicht Gegenstand dieser Arbeit.

\subsection{Texterkennung und OCR-Integration}
\begin{itemize}
    \item \textbf{FA-004}\label{req:FA-004} \textbf{OCR-Genauigkeit:} Integration von OCR 
    zur Extraktion von Textinformationen (Signalbezeichnungen, Kilometrierungen). Die 
    Bewertung der Texterkennungsqualität erfolgt nach dem Prinzip der 
    \textit{Feldgenauigkeit} (vgl. Abschnitt~\ref{subsec:ocr_metriken}): Ein Textfeld 
    gilt als korrekt, wenn der extrahierte Wert exakt mit dem Ground Truth 
    übereinstimmt. Diese feldbasierte Bewertung ist in die End-to-End-Systemgenauigkeit 
    (NFA-003) integriert, da sie die praktische Relevanz für den Engineering-Workflow 
    besser abbildet als zeichenbasierte Metriken wie die Character Error Rate. 
    Typische OCR-Fehler (Verwechslungen von O/0, I/1, etc.) werden durch 
    domänenspezifische Validierung (Regex-Muster) automatisch erkannt.
    
    \item \textbf{FA-005}\label{req:FA-005} \textbf{Robustheit:} Die Texterkennung muss auch unter erschwerten Bedingungen zuverlässig funktionieren. Dazu zählen:
    \begin{itemize}
        \item Niedriger Kontrast oder Artefakte durch Scan-Vorgänge (Bildrauschen).
        \item Rotierte Beschriftungen in kardinalen Orientierungen ($0^\circ, 90^\circ, 180^\circ, 270^\circ$) sowie Abweichungen bis $\pm 15^\circ$ durch manuelle Platzierung oder Export-Toleranzen.
        \item Überlagerungen durch Führungslinien oder andere grafische Elemente.
    \end{itemize}
    \begin{figure}[H]
    \centering
    \includegraphics[width=5cm]{images/Kapitel4/OCRsample.png} 
    \caption{Beispielhafte Extraktion von Text und Position am Symbol GKS}
    \label{fig:Ocrsample}
    \end{figure}
\end{itemize}

\subsection{Semantische Verknüpfung und Logik}
Über die reine Detektion hinaus muss das System logische Zusammenhänge zwischen den erkannten Elementen herstellen (\enquote{Intelligent Linking}):

\begin{itemize}
    \item \textbf{FA-006}\label{req:FA-006} \textbf{Fahrtrichtungsdetektion:} Basierend auf der geometrischen Orientierung (Rotationswinkel) von Signalen und Weichen muss automatisch die Wirkrichtung (z.\,B. in Richtung steigender oder fallender Kilometrierung) abgeleitet werden.
    
    \item \textbf{FA-007}\label{req:FA-007} \textbf{Symbol-Koordinaten-Verknüpfung:} 
    Jedes erkannte Gleisplanelement (Signal, GKS, GM-Block) muss automatisch 
    mit der räumlich nächstgelegenen Kilometrierungsangabe verknüpft werden. 
    Die Verknüpfung erfolgt durch geometrische Proximity-Analyse unter 
    Berücksichtigung der Symbolorientierung. Bei komplexen Objekten wie Haltepunkten müssen zusätzlich mehrere zusammengehörige Elemente (Haltepunkt-Symbol, zugehöriges Signal, Koordinate) zu einer logischen Einheit gruppiert werden.

    \item \textbf{FA-008}\label{req:FA-008} \textbf{Manuelle Korrektur (Human-in-the-Loop):} Da automatische Heuristiken fehleranfällig sein können, muss das System eine Möglichkeit bieten, automatisch erstellte Verknüpfungen manuell zu überschreiben oder zu korrigieren (\enquote{Linking Override}).
\end{itemize}

\subsection{Datenaufbereitung und Export}
\begin{itemize}
    \item \textbf{FA-009}\label{req:FA-009} \textbf{Excel-Integration:} Die extrahierten Daten müssen vollautomatisch in vordefinierte Projektierungs- oder Prüftabellen (Excel .xlsx) übertragen werden. Dabei ist essenziell, dass die Daten in die semantisch korrekten Zellen (Zeilen/Spalten) geschrieben werden.
    \begin{figure}[H]
    \centering
    \includegraphics[width=6cm]{images/Kapitel4/excelübertragung.png} 
    \caption{Schematische Übertragung von erkannten Objektdaten in die Ziel-Tabelle}
    \label{fig:excelübertragung}
    \end{figure}

    \item \textbf{FA-010}\label{req:FA-010} \textbf{Strukturerhalt:} Beim Import in bestehende Dateien darf die vorhandene Struktur (Formatierung, Formeln, Makros) nicht beschädigt werden. Das System darf lediglich Werte (Values) in definierte Bereiche einfügen (Non-destructive Update).

    \item \textbf{FA-011}\label{req:FA-011} \textbf{Änderungsverfolgung (Diff-Funktion):} Automatischer Vergleich zweier Planversionen mit Kategorisierung:
        \begin{itemize}
            \item Hinzugefügt: Neue Objekte in Version B
            \item Entfernt: Objekte aus Version A fehlen in Version B
            \item Verschoben: Identische Kennung, unterschiedliche Position
            \item Modifiziert: Gleiche Position, geänderter Text
        \end{itemize}
    Export als separates Excel-Sheet mit Spalten: Objektklasse, Kennung, Änderungstyp, Alt-Wert, Neu-Wert, Koordinaten.
    \begin{figure}[H]
    \centering
    \includegraphics[width=9cm]{images/Kapitel4/änderungsample.png} 
    \caption{Visualisierung der Änderungsverfolgung zwischen zwei Planversionen}
    \label{fig:änderungsample}
    \end{figure}

    \item \textbf{FA-012}\label{req:FA-012} \textbf{Visuelle Validierung:} Zur manuellen Überprüfung (\enquote{Ground Truthing}) sollen im ausgegebenen Gleisplan (oder einer Overlay-Ansicht) alle erkannten Objekte durch farbige Bounding Boxes markiert werden.
    \begin{figure}[H]
    \centering
    \includegraphics[width=14cm]{images/Kapitel4/gleisplanmarkierungv2.png} 
    \caption{Visuelle Validierung durch Bounding-Box-Overlays im Gleisplan \cite{railroadstationdrawing}}
    \label{fig:gleisplanmarkierung}
    \end{figure}
\end{itemize}

\subsection{Benutzerinteraktion und Konfiguration}
\begin{itemize}
    \item \textbf{FA-013}\label{req:FA-013} \textbf{Grafische Benutzeroberfläche (GUI):} Die Bedienung soll über eine intuitive Oberfläche erfolgen, die den Upload von PDF-Dateien, den Start der Analyse sowie den Export ermöglicht, ohne dass Kommandozeilen-Kenntnisse erforderlich sind.
    
    
    \item \textbf{FA-014}\label{req:FA-014} \textbf{Modularität:} Der Prototyp muss eine 
    modulare Architektur aufweisen, die eine klare Trennung der Verantwortlichkeiten zwischen den Verarbeitungsstufen (Objekterkennung, Texterkennung, UI, Export) gewährleistet. Dies ermöglicht die unabhängige Weiterentwicklung einzelner Komponenten sowie die Integration neuer Funktionalitäten (z.B. zusätzliche Symbolklassen) ohne Modifikation der Kernlogik. Die Architekturkonzeption wird in Kapitel~\ref{chap:konzeption} detailliert beschrieben.
\end{itemize}

\section{Nicht-funktionale Anforderungen}
\label{sec:nichtfunktionaleanforderungen}
Ergänzend zu den funktionalen Zielen definieren die nicht-funktionalen Anforderungen (NFA-001 bis NFA-012)die Qualitätsmerkmale und Rahmenbedingungen des Systems.

\subsection{Sicherheit und Datenschutz}
\begin{itemize}
    \item \textbf{NFA-001}\label{req:NFA-001} \textbf{On-Premise-Verarbeitung:} Keine Datenübertragung an externe Cloud-Services. Vollständig lokale Ausführung auf Siemens-Systemen. Offline-Betrieb gewährleistet.
    
    \item \textbf{NFA-002}\label{req:NFA-002} \textbf{Lizenzkonformität:} Ausschließlich Open-Source-Bibliotheken mit genehmigten Lizenzen (Apache 2.0, MIT, BSD). Dokumentation aller Abhängigkeiten.
\end{itemize}

\subsection{Qualität und Zuverlässigkeit}
\begin{itemize}
    \item \textbf{NFA-003}\label{req:NFA-003} \textbf{Gesamtsystem-Genauigkeit:} Mindestens 85\,\% aller Objekte müssen vollständig korrekt extrahiert werden (Detektion + OCR + Linking + Export korrekt). Verbleibende 15\,\% erfordern manuelle Korrektur. Messung in Kapitel 7 auf Ground-Truth-Datensatz.
    
    \item \textbf{NFA-004}\label{req:NFA-004} \textbf{Robustheit:} Resilient gegenüber fehlerhaften Eingaben (korrupte PDFs, Rauschen). Definierte Fehlermeldungen statt Absturz.
    
    \item \textbf{NFA-005}\label{req:NFA-005} \textbf{Prüfbarkeit:} Visuelle Validierung aller Ergebnisse (Bounding-Box-Overlay). Rückverfolgbarkeit: Klick auf Tabellenzeile zeigt Position im Plan.
\end{itemize}

\subsection{Effizienz und Wirtschaftlichkeit}
\begin{itemize}
    \item \textbf{NFA-006}\label{req:NFA-006} \textbf{Prozessoptimierung:} Das Hauptziel ist die Reduktion des manuellen Prüfaufwands. Das Tool soll den Prozess vom zeitintensiven \enquote{4-Augen-Prinzip} (zwei Menschen prüfen manuell) hin zu einem KI-gestützten Prozess (\enquote{Mensch prüft KI}) transformieren.
    
    \item \textbf{NFA-007}\label{req:NFA-007} \textbf{Ressourceneffizienz:} Die Analyse eines durchschnittlichen Bahnhofsplans sollte auf Standard-Hardware in akzeptabler Zeit (wenige Minuten) durchführbar sein.
\end{itemize}

\subsection{Wartbarkeit und Erweiterbarkeit}
\begin{itemize}
    \item \textbf{NFA-008}\label{req:NFA-008} \textbf{Erweiterbarkeit:} Der Code ist modular zu strukturieren, um zukünftige Erweiterungen (z.\,B. Anbindung an CAD-Systeme) zu erleichtern.
    
    \item \textbf{NFA-009}\label{req:NFA-009} \textbf{Update-Fähigkeit:} Neue Symbolvarianten müssen über Konfigurations-Updates oder neue Modell-Gewichte (Weights) einspielbar sein.
\end{itemize}

\subsection{Datenformate und Schnittstellen}
\label{subsec:datenformate}
Die Datengrundlage bilden reale Gleispläne aus dem Bereich \textit{Trainguard MT ZUB} der Siemens Mobility GmbH. Das System muss mit verschiedenen Eingabeformaten und Datenquellen kompatibel sein.

\begin{itemize}
    \item \textbf{NFA-010}\label{req:NFA-010} \textbf{Eingabeformate:} Das System muss folgende Eingabeformate verarbeiten können:
    \begin{itemize}
        \item PDF-Dateien (Vektor- und Rastergrafiken) -- werden intern bei 500 DPI gerendert
        \item Bilddateien (PNG, JPEG, TIFF, BMP) -- erfordern eine native Auflösung von 500 DPI
    \end{itemize}
    
    \textbf{Begründung:} Das YOLOv8-OBB Modell wurde ausschließlich auf Bildkacheln 
    trainiert, die aus bei 500 DPI gerenderten PDFs des aktuellen Gleisplan-Layouts 
    extrahiert wurden (vgl. Abschnitt~\ref{subsec:Datensatzerstellung}). Eine 
    Abweichung von dieser Auflösung führt zu signifikant reduzierten 
    Erkennungsraten, da die gelernten Pixelmuster nicht mehr mit den 
    Eingabedaten übereinstimmen. Die Unterstützung von Bilddateien ermöglicht 
    die zukünftige Erweiterung auf andere Gleisplan-Layouts ohne Änderung 
    der Systemarchitektur.
    
    \item \textbf{NFA-011}\label{req:NFA-011} \textbf{Datenquellen:} Das System muss mit folgenden Datenquellen kompatibel sein:
    \begin{itemize}
        \item \textbf{Primäre Quelle:} Kundenspezifische Gleispläne im PDF-/Bildformat. Diese enthalten Vektor- oder Rastergrafiken, exportiert aus technischen Zeichnungs- und Planungssystemen (z.\,B. AutoCAD, LCAD).
        \item \textbf{Sekundäre Quellen:} Historische Bestandspläne (Scans mit potentiell niedrigerer Qualität) sowie synthetisch erzeugte Testdaten zur Überprüfung der Robustheit.
    \end{itemize}
    
    \item \textbf{NFA-012}\label{req:NFA-012} \textbf{Ausgabeformate:} Das System muss Ergebnisse in folgenden Formaten exportieren können:
    \begin{itemize}
        \item Excel-Arbeitsmappe (.xlsx) für Engineering-Workflows
        \item CSV für einfachen Datenaustausch
        \item JSON für API-Schnittstellen
    \end{itemize}
\end{itemize}

Tabelle \ref{tab:formate-prototyp} gibt einen detaillierten Überblick über die im System verwendeten Dateiformate und deren Einsatz in der Verarbeitungspipeline.

\begin{table}[H]
\centering
\renewcommand{\arraystretch}{1.4}
\begin{tabularx}{\textwidth}{|p{2.5cm}|p{2cm}|X|X|}
\hline
\textbf{Kategorie} & \textbf{Format} & \textbf{Beschreibung} & \textbf{Einsatz im Prototyp} \\
\hline
\textbf{Eingabe} & PDF & Standardformat für Pläne & Primäre Datenquelle \\
 & PNG/JPG & Rasterisierte Ausschnitte & Input für CNN/YOLO \\
\hline
\textbf{Verarbeitung} & JSON & Strukturierte Metadaten & Interner Datenaustausch \\
 & PostgreSQL & Relationale Datenbank & Persistenz \& Versionierung \\
\hline
\textbf{Ausgabe} & XLSX & Excel-Arbeitsmappe & Engineering-Workflow \\
 & CSV & Textbasiertes Format & Einfacher Datenaustausch \\
 & JSON & API-Response & Schnittstellenanbindung \\
\hline
\end{tabularx}
\caption{Übersicht der unterstützten Datenformate (siehe \ref{req:NFA-010} bis \ref{req:NFA-012})}
\label{tab:formate-prototyp}
\end{table}

\section{Herausforderungen bei der Umsetzung}
Die Realisierung der in den Abschnitten \ref{subsec:req_symbol} bis \ref{subsec:datenformate} definierten Anforderungen sieht sich folgenden technischen Herausforderungen gegenüber:

\begin{enumerate}
    \item \textbf{Daten-Heterogenität:} Die Varianz in den Eingabedaten (unterschiedliche Export-Einstellungen, Linienstärken, Skalierungen) erschwert eine universelle Regelbildung.
    \item \textbf{Visuelle Ambiguität:} Einige Symbole (z.\,B. unterschiedliche Gleiskoppelspulen-Typen) unterscheiden sich visuell nur in wenigen Pixeln oder sind nur durch den Kontext (Begleittext) differenzierbar.
    \item \textbf{OCR-Komplexität:} Technischer Text in Plänen ist oft extrem klein, rotiert und durch Führungslinien durchgestrichen, was klassische OCR-Engines (wie Tesseract) an ihre Grenzen bringt.
    \item \textbf{Mangel an Trainingsdaten:} Es existiert kein öffentlicher Datensatz für bahntechnische Symbolik. Ein \enquote{Cold Start} ist notwendig, bei dem Trainingsdaten zunächst manuell (z.\,B. via CVAT) annotiert werden müssen.
    \item \textbf{Semantische Lücke:} Der Schritt von der Erkennung (\enquote{Da ist eine Box}) zur Bedeutung (\enquote{Das ist Weiche 12 in Rechtslage}) erfordert komplexe Heuristiken, insbesondere beim Mapping von Textboxen zu den geometrisch nächsten Symbolen.
\end{enumerate}

\section{Anforderungs-Rückverfolgbarkeit}
\label{sec:traceability}

Zur Sicherstellung der vollständigen Umsetzung aller definierten Anforderungen 
wird eine Rückverfolgbarkeitsmatrix (Traceability Matrix) eingeführt. Diese 
dokumentiert die Zuordnung jeder Anforderung zu den entsprechenden 
Implementierungskomponenten (Kapitel~\ref{chap:implementierung}) sowie den 
Evaluationsmetriken (Kapitel~\ref{chap:evaluation}).

\subsection{Funktionale Anforderungen}

\begin{longtable}{|l|>{\raggedright\arraybackslash}p{4cm}|>{\raggedright\arraybackslash}p{4.5cm}|>{\raggedright\arraybackslash}p{4.5cm}|}
\hline
\textbf{ID} & \textbf{Anforderung} & \textbf{Implementierung} & \textbf{Evaluation} \\
\hline
\endfirsthead
\hline
\textbf{ID} & \textbf{Anforderung} & \textbf{Implementierung} & \textbf{Evaluation} \\
\hline
\endhead

\hyperref[req:FA-001]{FA-001} & Erkennungsrate $\geq$ 90\% & 
Abschn.~\ref{sec:objekterkennungmityolov8obb}: YOLOv8-OBB Training mit 13 Klassen & 
Abschn.~\ref{subsec:detection_eval}: Recall = 95.7\% (Val), 100\% (Test) \\
\hline

\hyperref[req:FA-002]{FA-002} & Rotationsinvarianz ($0^\circ$--$360^\circ$) & 
Abschn.~\ref{sec:objekterkennungmityolov8obb}: OBB-Annotation, synthetische Rotation (10 Winkel) & 
Abschn.~\ref{subsec:e2e_test_eval}, Tab.~\ref{tab:rotation_analysis}: 38 Objekte mit $|\theta|>30^\circ$ bei höherer Konfidenz (0.946 vs. 0.890) \\
\hline

\hyperref[req:FA-003]{FA-003} & Zielobjekte (5 Kernklassen) & 
Abschn.~\ref{sec:objekterkennungmityolov8obb}: Signal, Koordinate, GKS (2 Typen), GM-Block & 
Abschn.~\ref{subsec:e2e_test_eval}: 636/644 Objekte korrekt (98.76\%)\\
\hline

\hyperref[req:FA-004]{FA-004} & OCR-Genauigkeit (in E2E integriert) & 
Abschn.~\ref{sec:ocrpipeline}: Multi-Engine Kaskade (PaddleOCR, Tesseract, EasyOCR) & 
Abschn.~\ref{subsec:e2e_test_eval}: 3 OCR-bedingte Fehler (0.47\% Fehlerrate) \\
\hline

\hyperref[req:FA-005]{FA-005} & OCR-Robustheit (Rauschen, Rotation) & 
Abschn.~\ref{sec:ocrpipeline}: Dual-Winkel-Routing, CLAHE, Linienentfernung & 
Abschn.~\ref{subsec:e2e_test_eval}, Tab.~\ref{tab:rotation_analysis}: 100\% OCR-Erfolg bei $|\theta|>30^\circ$ (38/38) \\
\hline

\hyperref[req:FA-006]{FA-006} & Fahrtrichtungsdetektion & 
Abschn.~\ref{sec:fahrtrichtung}: Geometrische Ableitung aus Signal-GKS-Relation & 
Abschn.~\ref{subsec:e2e_test_eval}: 171/172 korrekt (99.42\%), Tab.~\ref{tab:signal_attribute_accuracy} \\
\hline

\hyperref[req:FA-007]{FA-007} & Symbol-Koordinaten-Verknüpfung & 
Abschn.~\ref{sec:intelligentesymboltextverknüpfung}: Proximity-basiertes Linking & 
Abschn.~\ref{subsec:e2e_test_eval}: 642/644 Verknüpfungen korrekt (99.69\%) \\
\hline

\hyperref[req:FA-008]{FA-008} & Manuelle Korrektur (Human-in-the-Loop) & 
Abschn.~\ref{sec:validierungundsicherung}: Validierungsdialog mit Inline-Editierung & 
Abschn.~\ref{subsubsec:validation_tools}: Prüfaufwand um 85\% reduziert \\
\hline

\hyperref[req:FA-009]{FA-009} & Excel-Integration & 
Abschn.~\ref{subsec:exportfunktionlität}: XLSX-Export mit Formatierung & 
Abschn.~\ref{subsec:functional_validation}, Tab.~\ref{tab:functional_validation} \\
\hline

\hyperref[req:FA-010]{FA-010} & Strukturerhalt (Non-destructive Update) & 
Abschn.~\ref{subsec:exportfunktionlität}: Werte-Insertion ohne Formatänderung & 
Abschn.~\ref{subsec:functional_validation}, Tab.~\ref{tab:functional_validation} \\
\hline

\hyperref[req:FA-011]{FA-011} & Änderungsverfolgung (Diff) & 
Abschn.~\ref{subsec:vergleichundänderung}: UID-basierter Versionsvergleich & 
Abschn.~\ref{subsec:functional_validation}, Tab.~\ref{tab:functional_validation} \\
\hline

\hyperref[req:FA-012]{FA-012} & Visuelle Validierung (Bounding Boxes) & 
Abschn.~\ref{sec:benutzeroberfläche}: PDF-Viewer mit Overlay-System & 
Abschn.~\ref{subsec:functional_validation}, Tab.~\ref{tab:functional_validation} \\
\hline

\hyperref[req:FA-013]{FA-013} & Grafische Benutzeroberfläche & 
Abschn.~\ref{sec:benutzeroberfläche}: PyQt5-basierte Desktop-Anwendung & 
Abschn.~\ref{subsec:functional_validation}, Tab.~\ref{tab:functional_validation} \\
\hline

\hyperref[req:FA-014]{FA-014} & Modularität (Architektur) & 
Kap.~\ref{chap:konzeption}: Schichtenarchitektur; Abschn.~\ref{sec:objekterkennungmityolov8obb}: 8 Auxiliarklassen & 
Abschn.~\ref{subsec:nfa_validation}: Erweiterung ohne Kernlogik-Änderung \\
\hline

\caption{Rückverfolgbarkeitsmatrix: Funktionale Anforderungen}
\label{tab:traceability_fa}
\end{longtable}

\subsection{Nicht-funktionale Anforderungen}

\begin{longtable}{|l|>{\raggedright\arraybackslash}p{3.5cm}|>{\raggedright\arraybackslash}p{4cm}|>{\raggedright\arraybackslash}p{4cm}|}
\hline
\textbf{ID} & \textbf{Anforderung} & \textbf{Implementierung} & \textbf{Evaluation} \\
\hline
\endfirsthead
\hline
\textbf{ID} & \textbf{Anforderung} & \textbf{Implementierung} & \textbf{Evaluation} \\
\hline
\endhead

\hyperref[req:NFA-001]{NFA-001} & On-Premise-Verarbeitung & 
Vollständig lokale Ausführung, keine Cloud-APIs & 
Abschn.~\ref{subsec:testumgebung}: CPU-only Inferenz; Abschn.~\ref{subsec:nfa_validation} \\
\hline

\hyperref[req:NFA-002]{NFA-002} & Lizenzkonformität (Apache/MIT/BSD) & 
Tab.~\ref{tab:tech_stack}: Alle Bibliotheken Open Source & 
Abschn.~\ref{subsec:nfa_validation}: Lizenzprüfung dokumentiert \\
\hline

\hyperref[req:NFA-003]{NFA-003} & Gesamtgenauigkeit $\geq$ 85\% & 
Gesamte Pipeline (Kap.~\ref{chap:implementierung}) & 
Abschn.~\ref{subsec:e2e_test_eval}: 98.76\% erreicht \\
\hline

\hyperref[req:NFA-004]{NFA-004} & Robustheit (fehlerhafte Eingaben) & 
Abschn.~\ref{sec:validierungundsicherung}: Fallback-Mechanismen & 
Abschn.~\ref{subsubsec:validation_tools}: 7 Pläne ohne Abstürze \\
\hline

\hyperref[req:NFA-005]{NFA-005} & Prüfbarkeit (Rückverfolgbarkeit) & 
Abschn.~\ref{sec:unterstützendekomponente}: Metadaten, Jump-to-Detection & 
Abschn.~\ref{subsubsec:validation_tools}: Bidirektionale Navigation \\
\hline

\hyperref[req:NFA-006]{NFA-006} & Prozessoptimierung & 
Automatisierung des manuellen Prozesses & 
Abschn.~\ref{subsubsec:processing_time}: 75.3\% Zeitersparnis \\
\hline

\hyperref[req:NFA-007]{NFA-007} & Ressourceneffizienz & 
CPU-kompatible Inferenz & 
Abschn.~\ref{subsubsec:processing_time}: Ø 12.3 min/Plan \\
\hline

\hyperref[req:NFA-008]{NFA-008} & Erweiterbarkeit & 
Modulare Architektur (Kap.~\ref{chap:konzeption}) & 
Abschn.~\ref{subsec:nfa_validation}: 8 Auxiliarklassen integriert \\
\hline

\hyperref[req:NFA-009]{NFA-009} & Update-Fähigkeit & 
Externe Modell-Gewichte (\texttt{best.pt}) & 
Abschn.~\ref{subsec:nfa_validation}: Nachtraining demonstriert \\
\hline

\hyperref[req:NFA-010]{NFA-010} & Eingabeformate (PDF, PNG, JPG) & 
Abschn.~\ref{Inferenz}: PyMuPDF, OpenCV & 
Abschn.~\ref{subsec:testdatensatz}: 7 PDFs verarbeitet \\
\hline

\hyperref[req:NFA-011]{NFA-011} & Datenquellen (Kundenpläne) & 
Abschn.~\ref{Inferenz}: 500 DPI Rasterisierung & 
Abschn.~\ref{subsec:testdatensatz}: Siemens Mobility Pläne \\
\hline

\hyperref[req:NFA-012]{NFA-012} & Ausgabeformate (XLSX, CSV, JSON) & 
Abschn.~\ref{subsec:exportfunktionlität}: Drei Export-Optionen & 
Abschn.~\ref{subsec:functional_validation}: Funktionstest bestanden \\
\hline

\caption{Rückverfolgbarkeitsmatrix: Nicht-funktionale Anforderungen}
\label{tab:traceability_nfa}
\end{longtable}